# BlockSuite åˆ—å¸ƒå±€åŠŸèƒ½å®æ–½è®¡åˆ’æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### å®æ–½ç›®æ ‡
ä¸ºBlockSuiteç¼–è¾‘å™¨å®ç°ç±»ä¼¼Notionçš„åˆ—å¸ƒå±€åˆ‡æ¢åŠŸèƒ½ï¼Œä½¿ç”¨æˆ·èƒ½å¤Ÿåœ¨1-5åˆ—å¸ƒå±€é—´è‡ªç”±åˆ‡æ¢ï¼Œæä¾›çµæ´»çš„å†…å®¹å±•ç¤ºæ–¹å¼ã€‚

### é¡¹ç›®ç‰¹ç‚¹
- **éä¾µå…¥å¼**: ä¸ç ´åç°æœ‰é¡µé¢ç»“æ„
- **æ¸è¿›å¢å¼º**: åˆ†é˜¶æ®µå®æ–½ï¼Œæ¯ä¸ªé˜¶æ®µéƒ½èƒ½ç‹¬ç«‹ä½¿ç”¨
- **é«˜è´¨é‡**: å®Œæ•´çš„æµ‹è¯•è¦†ç›–å’Œæ–‡æ¡£
- **å¯æ‰©å±•**: ä¸ºæœªæ¥åŠŸèƒ½æ‰©å±•é¢„ç•™æ¥å£

## ğŸ¯ å®æ–½é˜¶æ®µè§„åˆ’

### ç¬¬ä¸€é˜¶æ®µ: åŸºç¡€æ¶æ„ (5å¤©)
**ç›®æ ‡**: å»ºç«‹æ ¸å¿ƒæœåŠ¡å’Œæ•°æ®ç»“æ„

#### Day 1: é¡¹ç›®ç»“æ„æ­å»º
- [x] åˆ›å»ºæ–‡æ¡£ä½“ç³»
- [ ] è®¾ç½®é¡¹ç›®ç›®å½•ç»“æ„
- [ ] é…ç½®å¼€å‘ç¯å¢ƒ
- [ ] å»ºç«‹ä»£ç è§„èŒƒ

#### Day 2: æ ¸å¿ƒæ•°æ®ç»“æ„
- [ ] å®ç°å¸ƒå±€æ¨¡å¼æšä¸¾å’Œé…ç½®
- [ ] åˆ›å»ºå­˜å‚¨æœåŠ¡åŸºç¡€æ¶æ„
- [ ] å®ç°å¸ƒå±€é…ç½®æ•°æ®æ¨¡å‹
- [ ] è®¾ç½®ç±»å‹å®šä¹‰

#### Day 3: çŠ¶æ€ç®¡ç†æœåŠ¡
- [ ] å®ç°PageLayoutServiceæ ¸å¿ƒé€»è¾‘
- [ ] å»ºç«‹å¸ƒå±€çŠ¶æ€å“åº”å¼ç³»ç»Ÿ
- [ ] åˆ›å»ºäº‹ä»¶ç³»ç»Ÿæ¶æ„
- [ ] å®ç°åŸºç¡€çš„å¸ƒå±€åˆ‡æ¢é€»è¾‘

#### Day 4: å†…å®¹åˆ†é…å™¨
- [ ] å®ç°ColumnDistributoråŸºç¡€ç®—æ³•
- [ ] åˆ›å»ºBlocké«˜åº¦ä¼°ç®—ç³»ç»Ÿ
- [ ] å®ç°è½®è¯¢åˆ†é…ç­–ç•¥
- [ ] æ·»åŠ å¹³è¡¡é«˜åº¦åˆ†é…ç®—æ³•

#### Day 5: å­˜å‚¨æŒä¹…åŒ–
- [ ] å®ç°æœ¬åœ°å­˜å‚¨åŠŸèƒ½
- [ ] æ·»åŠ é…ç½®ç¼“å­˜æœºåˆ¶
- [ ] å»ºç«‹æ•°æ®éªŒè¯å’Œè¿ç§»
- [ ] å®ŒæˆåŸºç¡€æ¶æ„é›†æˆæµ‹è¯•

### ç¬¬äºŒé˜¶æ®µ: UIç»„ä»¶å¼€å‘ (7å¤©)

#### Day 6-7: å¸ƒå±€åˆ‡æ¢å™¨
- [ ] è®¾è®¡å’Œå®ç°LayoutSwitcherç»„ä»¶
- [ ] åˆ›å»ºå›¾æ ‡ç³»ç»Ÿå’Œè§†è§‰è®¾è®¡
- [ ] å®ç°äº¤äº’é€»è¾‘å’ŒçŠ¶æ€ç®¡ç†
- [ ] æ·»åŠ é”®ç›˜å¯¼èˆªæ”¯æŒ
- [ ] å®ç°å“åº”å¼é€‚é…

#### Day 8-9: åˆ—å†…å®¹ç»„ä»¶
- [ ] å®ç°ColumnContentåŸºç¡€ç»„ä»¶
- [ ] æ·»åŠ æ‹–æ‹½åŠŸèƒ½æ”¯æŒ
- [ ] åˆ›å»ºç©ºçŠ¶æ€å’Œæ·»åŠ å†…å®¹UI
- [ ] å®ç°Blockæ¸²æŸ“é›†æˆ
- [ ] æ·»åŠ åˆ—å¤´å’Œæ“ä½œæŒ‰é’®

#### Day 10-11: å¸ƒå±€æ¸²æŸ“å™¨
- [ ] å®ç°LayoutRendereræ ¸å¿ƒé€»è¾‘
- [ ] åˆ›å»ºCSS Gridå¸ƒå±€ç³»ç»Ÿ
- [ ] å®ç°åŠ¨æ€åˆ—æ•°æ¸²æŸ“
- [ ] æ·»åŠ å¸ƒå±€åˆ‡æ¢åŠ¨ç”»
- [ ] ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½

#### Day 12: ç»„ä»¶é›†æˆæµ‹è¯•
- [ ] å®Œæˆç»„ä»¶é—´é€šä¿¡æµ‹è¯•
- [ ] éªŒè¯äº¤äº’æµç¨‹å®Œæ•´æ€§
- [ ] è¿›è¡Œç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] ä¿®å¤å‘ç°çš„é—®é¢˜

### ç¬¬ä¸‰é˜¶æ®µ: é«˜çº§åŠŸèƒ½ (6å¤©)

#### Day 13-14: åŠ¨ç”»ç³»ç»Ÿ
- [ ] å®ç°AnimationManager
- [ ] åˆ›å»ºå¸ƒå±€åˆ‡æ¢åŠ¨ç”»æ•ˆæœ
- [ ] æ·»åŠ Blockç§»åŠ¨åŠ¨ç”»
- [ ] å®ç°ç¼“åŠ¨å‡½æ•°å’Œå…³é”®å¸§
- [ ] ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½

#### Day 15-16: å“åº”å¼ç³»ç»Ÿ
- [ ] å®ç°ResponsiveManager
- [ ] æ·»åŠ æ–­ç‚¹æ£€æµ‹å’Œå¤„ç†
- [ ] åˆ›å»ºç§»åŠ¨ç«¯é€‚é…é€»è¾‘
- [ ] å®ç°å®¹å™¨æŸ¥è¯¢æ”¯æŒ
- [ ] æµ‹è¯•å„ç§å±å¹•å°ºå¯¸

#### Day 17-18: åˆ—å®½è°ƒæ•´åŠŸèƒ½
- [ ] å®ç°ColumnResizerç»„ä»¶
- [ ] æ·»åŠ æ‹–æ‹½è°ƒæ•´äº¤äº’
- [ ] åˆ›å»ºå®½åº¦çº¦æŸç³»ç»Ÿ
- [ ] å®ç°åŒå‡»é‡ç½®åŠŸèƒ½
- [ ] æ·»åŠ è§¦æ‘¸è®¾å¤‡æ”¯æŒ

### ç¬¬å››é˜¶æ®µ: æ€§èƒ½ä¼˜åŒ– (4å¤©)

#### Day 19-20: è™šæ‹ŸåŒ–å’Œç¼“å­˜
- [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–
- [ ] æ·»åŠ å¸ƒå±€ç¼“å­˜æœºåˆ¶
- [ ] ä¼˜åŒ–Blocké«˜åº¦è®¡ç®—
- [ ] å®ç°æ‡’åŠ è½½ç­–ç•¥
- [ ] æ€§èƒ½åŸºå‡†æµ‹è¯•

#### Day 21-22: å†…å­˜ç®¡ç†
- [ ] å®ç°ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç®¡ç†
- [ ] æ·»åŠ äº‹ä»¶ç›‘å¬å™¨æ¸…ç†
- [ ] ä¼˜åŒ–DOMæ“ä½œæ‰¹å¤„ç†
- [ ] å®ç°èµ„æºé¢„åŠ è½½
- [ ] å†…å­˜æ³„æ¼æ£€æµ‹

### ç¬¬äº”é˜¶æ®µ: æ‰©å±•å’Œé›†æˆ (5å¤©)

#### Day 23-24: æ‰©å±•ç³»ç»Ÿ
- [ ] å®ç°LayoutExtensionAPI
- [ ] åˆ›å»ºæ’ä»¶åŸºç±»å’Œç®¡ç†å™¨
- [ ] æ·»åŠ è‡ªå®šä¹‰å¸ƒå±€æ¨¡å¼æ”¯æŒ
- [ ] å®ç°ä¸»é¢˜ç³»ç»Ÿé›†æˆ
- [ ] ç¤ºä¾‹æ’ä»¶å¼€å‘

#### Day 25-26: BlockSuiteé›†æˆ
- [ ] é›†æˆåˆ°PageRootBlock
- [ ] ä¿®æ”¹ä¸»é…ç½®æ–‡ä»¶
- [ ] æ·»åŠ Slashèœå•é›†æˆ
- [ ] å®ç°å·¥å…·æ æŒ‰é’®
- [ ] å®Œæˆå…¨åŠŸèƒ½æµ‹è¯•

#### Day 27: æ–‡æ¡£å’Œå‘å¸ƒå‡†å¤‡
- [ ] å®Œå–„APIæ–‡æ¡£
- [ ] ç¼–å†™ä½¿ç”¨æŒ‡å—
- [ ] åˆ›å»ºç¤ºä¾‹ä»£ç 
- [ ] å‡†å¤‡å‘å¸ƒææ–™

### ç¬¬å…­é˜¶æ®µ: æµ‹è¯•å’Œä¼˜åŒ– (6å¤©)

#### Day 28-29: å•å…ƒæµ‹è¯•
- [ ] ç¼–å†™æœåŠ¡å±‚å•å…ƒæµ‹è¯•
- [ ] æ·»åŠ ç»„ä»¶å•å…ƒæµ‹è¯•
- [ ] å®ç°å·¥å…·å‡½æ•°æµ‹è¯•
- [ ] è¾¾åˆ°90%æµ‹è¯•è¦†ç›–ç‡

#### Day 30-31: é›†æˆæµ‹è¯•
- [ ] ç¼–å†™ç«¯åˆ°ç«¯æµ‹è¯•ç”¨ä¾‹
- [ ] æµ‹è¯•ç”¨æˆ·äº¤äº’æµç¨‹
- [ ] éªŒè¯è·¨æµè§ˆå™¨å…¼å®¹æ€§
- [ ] æ€§èƒ½å›å½’æµ‹è¯•

#### Day 32-33: ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] å¯ç”¨æ€§æµ‹è¯•
- [ ] æ— éšœç¢æ€§æµ‹è¯•
- [ ] å¤šè®¾å¤‡æµ‹è¯•
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†å’Œå¤„ç†

## ğŸ“‚ è¯¦ç»†ä»»åŠ¡åˆ†è§£

### é˜¶æ®µä¸€è¯¦ç»†ä»»åŠ¡

#### Task 1.1: é¡¹ç›®ç»“æ„æ­å»º
```
â–¡ åˆ›å»º blocksuite/affine/layout æ¨¡å—ç›®å½•
  â””â”€â”€ package.json, tsconfig.json é…ç½®
  â””â”€â”€ src/ æºç ç›®å½•ç»“æ„
  â””â”€â”€ tests/ æµ‹è¯•ç›®å½•
  â””â”€â”€ docs/ æ–‡æ¡£ç›®å½•

â–¡ è®¾ç½®å¼€å‘å·¥å…·é…ç½®
  â””â”€â”€ ESLint, Prettier è§„åˆ™
  â””â”€â”€ TypeScript é…ç½®ä¼˜åŒ–
  â””â”€â”€ Vite æ„å»ºé…ç½®
  â””â”€â”€ æµ‹è¯•ç¯å¢ƒé…ç½®

â–¡ å»ºç«‹ä»£ç è§„èŒƒ
  â””â”€â”€ ç¼–ç è§„èŒƒæ–‡æ¡£
  â””â”€â”€ Git commit è§„èŒƒ
  â””â”€â”€ PR æ¨¡æ¿
  â””â”€â”€ ä»£ç å®¡æŸ¥æ¸…å•
```

#### Task 1.2: æ ¸å¿ƒæ•°æ®ç»“æ„
```typescript
// æ–‡ä»¶: src/types/layout.ts
export enum PageLayoutMode {
  Normal = 'normal',
  TwoColumn = '2-column',
  ThreeColumn = '3-column',
  FourColumn = '4-column',
  FiveColumn = '5-column'
}

export interface DocLayoutConfig {
  docId: string;
  layoutMode: PageLayoutMode;
  columnWidths: number[];
  responsive: boolean;
  lastModified: number;
  version: string;
}

// æ–‡ä»¶: src/config/layout-modes.ts
export const LayoutModeConfig = {
  [PageLayoutMode.Normal]: {
    columns: 1,
    icon: 'â–Š',
    label: 'å•åˆ—',
    defaultWidths: [1]
  },
  // ... å…¶ä»–æ¨¡å¼
};
```

#### Task 1.3: çŠ¶æ€ç®¡ç†æœåŠ¡
```typescript
// æ–‡ä»¶: src/services/page-layout-service.ts
export class PageLayoutService {
  private _layoutMode$ = signal<PageLayoutMode>(PageLayoutMode.Normal);
  private _columnWidths$ = signal<number[]>([]);
  
  async setLayoutMode(mode: PageLayoutMode, docId: string): Promise<void> {
    // å®ç°é€»è¾‘
  }
  
  getLayoutMode(docId: string): PageLayoutMode {
    // å®ç°é€»è¾‘
  }
  
  onLayoutModeChange(): Observable<LayoutModeChangeEvent> {
    // å®ç°é€»è¾‘
  }
}
```

#### Task 1.4: å†…å®¹åˆ†é…å™¨
```typescript
// æ–‡ä»¶: src/services/column-distributor.ts
export class ColumnDistributor {
  distributeBlocks(blocks: Block[], columnCount: number): Block[][] {
    // è½®è¯¢åˆ†é…ç®—æ³•
  }
  
  balancedDistribute(blocks: Block[], columnCount: number): Block[][] {
    // å¹³è¡¡é«˜åº¦åˆ†é…ç®—æ³•
  }
  
  private estimateBlockHeight(block: Block): number {
    // Blocké«˜åº¦ä¼°ç®—é€»è¾‘
  }
}
```

#### Task 1.5: å­˜å‚¨æŒä¹…åŒ–
```typescript
// æ–‡ä»¶: src/services/storage-service.ts
export class StorageService {
  async saveLayoutConfig(docId: string, config: Partial<DocLayoutConfig>): Promise<void> {
    // localStorage ä¿å­˜é€»è¾‘
  }
  
  async loadLayoutConfig(docId: string): Promise<DocLayoutConfig | null> {
    // localStorage åŠ è½½é€»è¾‘
  }
  
  private validateConfig(data: any): data is DocLayoutConfig {
    // é…ç½®éªŒè¯é€»è¾‘
  }
}
```

### é˜¶æ®µäºŒè¯¦ç»†ä»»åŠ¡

#### Task 2.1-2.2: å¸ƒå±€åˆ‡æ¢å™¨ç»„ä»¶
```typescript
// æ–‡ä»¶: src/components/layout-switcher.ts
@customElement('layout-switcher')
export class LayoutSwitcher extends LitElement {
  @property() docId!: string;
  @property() currentMode: PageLayoutMode = PageLayoutMode.Normal;
  
  render() {
    return html`
      <div class="layout-switcher-container">
        ${Object.values(PageLayoutMode).map(mode => 
          this.renderModeButton(mode)
        )}
      </div>
    `;
  }
  
  private async switchToMode(mode: PageLayoutMode) {
    // æ¨¡å¼åˆ‡æ¢é€»è¾‘
  }
}
```

#### Task 2.3-2.4: åˆ—å†…å®¹ç»„ä»¶
```typescript
// æ–‡ä»¶: src/components/column-content.ts
@customElement('column-content')
export class ColumnContent extends LitElement {
  @property() columnIndex!: number;
  @property() blocks: Block[] = [];
  
  render() {
    return html`
      <div class="column-content">
        <div class="column-header">
          <span class="column-title">ç¬¬ ${this.columnIndex + 1} åˆ—</span>
        </div>
        
        <div class="block-container">
          ${this.blocks.map(block => this.renderBlock(block))}
        </div>
        
        <button class="add-content-button" @click=${this.openAddMenu}>
          + æ·»åŠ å†…å®¹
        </button>
      </div>
    `;
  }
}
```

#### Task 2.5-2.6: å¸ƒå±€æ¸²æŸ“å™¨
```typescript
// æ–‡ä»¶: src/services/layout-renderer.ts
export class LayoutRenderer {
  async renderLayout(
    mode: PageLayoutMode,
    blocks: Block[],
    container: HTMLElement
  ): Promise<void> {
    // å¸ƒå±€æ¸²æŸ“ä¸»é€»è¾‘
  }
  
  private createLayoutContainer(mode: PageLayoutMode): HTMLElement {
    // CSS Grid å®¹å™¨åˆ›å»º
  }
  
  private distributeBlocksToColumns(blocks: Block[], columnCount: number): Block[][] {
    // å†…å®¹åˆ†é…é€»è¾‘
  }
}
```

### é˜¶æ®µä¸‰è¯¦ç»†ä»»åŠ¡

#### Task 3.1-3.2: åŠ¨ç”»ç³»ç»Ÿ
```typescript
// æ–‡ä»¶: src/services/animation-manager.ts
export class AnimationManager {
  async transitionToLayout(
    oldContainer: HTMLElement,
    newContainer: HTMLElement
  ): Promise<void> {
    // å¸ƒå±€åˆ‡æ¢åŠ¨ç”»é€»è¾‘
  }
  
  private async fadeOut(element: HTMLElement): Promise<void> {
    // æ·¡å‡ºåŠ¨ç”»
  }
  
  private async fadeInColumns(columns: HTMLElement[]): Promise<void> {
    // åˆ—æ·¡å…¥åŠ¨ç”»
  }
}
```

#### Task 3.3-3.4: å“åº”å¼ç³»ç»Ÿ
```typescript
// æ–‡ä»¶: src/services/responsive-manager.ts
export class ResponsiveManager {
  getEffectiveMode(requestedMode: PageLayoutMode): PageLayoutMode {
    // å“åº”å¼æ¨¡å¼è®¡ç®—
  }
  
  setupResponsiveListeners(container: HTMLElement): void {
    // å“åº”å¼ç›‘å¬å™¨è®¾ç½®
  }
  
  private handleContainerResize(entry: ResizeObserverEntry): void {
    // å®¹å™¨å°ºå¯¸å˜åŒ–å¤„ç†
  }
}
```

#### Task 3.5-3.6: åˆ—å®½è°ƒæ•´åŠŸèƒ½
```typescript
// æ–‡ä»¶: src/components/column-resizer.ts
@customElement('column-resizer')
export class ColumnResizer extends LitElement {
  @property() columnIndex!: number;
  
  private handleMouseDown = (event: MouseEvent) => {
    // æ‹–æ‹½å¼€å§‹é€»è¾‘
  };
  
  private updateResize(clientX: number) {
    // å®æ—¶è°ƒæ•´é€»è¾‘
  };
  
  private applyConstraints(widths: number[]): number[] {
    // å®½åº¦çº¦æŸåº”ç”¨
  };
}
```

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•è®¡åˆ’
```typescript
// æµ‹è¯•è¦†ç›–ç›®æ ‡
- PageLayoutService: 95%
- ColumnDistributor: 90%
- StorageService: 90%
- ç»„ä»¶æ¸²æŸ“: 85%
- å·¥å…·å‡½æ•°: 95%

// å…³é”®æµ‹è¯•ç”¨ä¾‹
describe('PageLayoutService', () => {
  test('should switch layout mode correctly', () => {
    // å¸ƒå±€åˆ‡æ¢æµ‹è¯•
  });
  
  test('should persist layout config', () => {
    // æŒä¹…åŒ–æµ‹è¯•
  });
  
  test('should handle invalid mode gracefully', () => {
    // é”™è¯¯å¤„ç†æµ‹è¯•
  });
});

describe('ColumnDistributor', () => {
  test('should distribute blocks evenly', () => {
    // å‡åŒ€åˆ†é…æµ‹è¯•
  });
  
  test('should balance heights correctly', () => {
    // é«˜åº¦å¹³è¡¡æµ‹è¯•
  });
});
```

### é›†æˆæµ‹è¯•è®¡åˆ’
```typescript
// E2Eæµ‹è¯•åœºæ™¯
describe('Layout Integration', () => {
  test('user can switch between layout modes', async () => {
    // ç”¨æˆ·åˆ‡æ¢æµ‹è¯•
  });
  
  test('layout preference is persisted across sessions', async () => {
    // æŒä¹…åŒ–é›†æˆæµ‹è¯•
  });
  
  test('responsive layout works on different screen sizes', async () => {
    // å“åº”å¼æµ‹è¯•
  });
  
  test('drag and drop between columns works', async () => {
    // æ‹–æ‹½åŠŸèƒ½æµ‹è¯•
  });
});
```

### æ€§èƒ½æµ‹è¯•è®¡åˆ’
```typescript
// æ€§èƒ½åŸºå‡†
- å¸ƒå±€åˆ‡æ¢æ—¶é—´: < 200ms
- å¤§é‡Blockæ¸²æŸ“: < 500ms (100+ blocks)
- å†…å­˜ä½¿ç”¨: < 50MBå¢é•¿
- FPSä¿æŒ: > 55fps åŠ¨ç”»æœŸé—´

// æµ‹è¯•å·¥å…·
- Lighthouse æ€§èƒ½è¯„åˆ†
- Chrome DevTools å†…å­˜åˆ†æ
- è‡ªå®šä¹‰æ€§èƒ½ç›‘æ§
```

## ğŸ”§ å¼€å‘ç¯å¢ƒé…ç½®

### å¿…éœ€å·¥å…·
```bash
# Node.js ç¯å¢ƒ
node >= 18.0.0
yarn >= 1.22.0

# å¼€å‘å·¥å…·
@typescript-eslint/parser
@typescript-eslint/eslint-plugin
prettier
vitest
playwright

# æ„å»ºå·¥å…·
vite
rollup
tsup
```

### é¡¹ç›®é…ç½®æ–‡ä»¶

#### package.json
```json
{
  "name": "@blocksuite/affine-layout",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/index.js",
  "module": "dist/index.esm.js",
  "types": "dist/index.d.ts",
  "scripts": {
    "dev": "vite",
    "build": "tsup",
    "test": "vitest",
    "test:e2e": "playwright test",
    "lint": "eslint src/**/*.ts",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "@preact/signals-core": "^1.5.1",
    "lit": "^3.1.0"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.3.0",
    "vite": "^5.0.0",
    "vitest": "^1.0.0",
    "playwright": "^1.40.0"
  }
}
```

#### tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "allowSyntheticDefaultImports": true,
    "esModuleInterop": true,
    "allowJs": true,
    "strict": true,
    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "removeComments": false,
    "experimentalDecorators": true,
    "useDefineForClassFields": false
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}
```

#### vite.config.ts
```typescript
import { defineConfig } from 'vite';

export default defineConfig({
  build: {
    lib: {
      entry: 'src/index.ts',
      name: 'BlocksuiteLayout',
      fileName: (format) => `index.${format}.js`
    },
    rollupOptions: {
      external: ['lit', '@preact/signals-core'],
      output: {
        globals: {
          'lit': 'Lit',
          '@preact/signals-core': 'SignalsCore'
        }
      }
    }
  },
  test: {
    environment: 'jsdom',
    coverage: {
      reporter: ['text', 'json', 'html']
    }
  }
});
```

## ğŸ“Š è´¨é‡ä¿è¯

### ä»£ç è´¨é‡æ ‡å‡†
```typescript
// å¤æ‚åº¦é™åˆ¶
- åœˆå¤æ‚åº¦: < 10
- è®¤çŸ¥å¤æ‚åº¦: < 15
- å‡½æ•°é•¿åº¦: < 50è¡Œ
- æ–‡ä»¶é•¿åº¦: < 500è¡Œ

// å‘½åè§„èŒƒ
- ç±»å: PascalCase
- æ–¹æ³•å: camelCase
- å¸¸é‡: UPPER_SNAKE_CASE
- æ–‡ä»¶å: kebab-case

// æ³¨é‡Šè¦æ±‚
- å…¬å…±APIå¿…é¡»æœ‰JSDoc
- å¤æ‚é€»è¾‘å¿…é¡»æœ‰è¡Œå†…æ³¨é‡Š
- TODO/FIXMEå¿…é¡»æœ‰è´Ÿè´£äºº
```

### æ€§èƒ½è¦æ±‚
```typescript
// æ¸²æŸ“æ€§èƒ½
- é¦–æ¬¡æ¸²æŸ“: < 100ms
- å¸ƒå±€åˆ‡æ¢: < 200ms
- åŠ¨ç”»å¸§ç‡: > 55fps
- å†…å­˜å¢é•¿: < 10MB/å°æ—¶

// ç½‘ç»œæ€§èƒ½
- åŒ…å¤§å°: < 50KB (gzipped)
- ä¾èµ–æ•°é‡: < 5ä¸ª
- Tree-shakingæ”¯æŒ: 100%
```

### å…¼å®¹æ€§è¦æ±‚
```typescript
// æµè§ˆå™¨æ”¯æŒ
- Chrome >= 90
- Firefox >= 88
- Safari >= 14
- Edge >= 90

// è®¾å¤‡æ”¯æŒ
- æ¡Œé¢ç«¯: 1024px+
- å¹³æ¿ç«¯: 768px - 1024px
- ç§»åŠ¨ç«¯: 320px - 768px

// åŠŸèƒ½æ”¯æŒ
- CSS Grid: å¿…éœ€
- ResizeObserver: å¿…éœ€
- Web Animations API: å¯é€‰
```

## ğŸ“… é‡Œç¨‹ç¢‘å’Œäº¤ä»˜ç‰©

### é‡Œç¨‹ç¢‘ 1: åŸºç¡€æ¶æ„å®Œæˆ (Day 5)
**äº¤ä»˜ç‰©:**
- [ ] å®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„
- [ ] æ ¸å¿ƒæœåŠ¡ç±»å®ç°
- [ ] åŸºç¡€æ•°æ®æ¨¡å‹
- [ ] å•å…ƒæµ‹è¯•æ¡†æ¶
- [ ] æŠ€æœ¯è®¾è®¡æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†:**
- [ ] æ‰€æœ‰æ ¸å¿ƒAPIå¯è°ƒç”¨
- [ ] åŸºç¡€å¸ƒå±€åˆ‡æ¢åŠŸèƒ½å¯ç”¨
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] ä»£ç é€šè¿‡æ‰€æœ‰è´¨é‡æ£€æŸ¥

### é‡Œç¨‹ç¢‘ 2: UIç»„ä»¶å®Œæˆ (Day 12)
**äº¤ä»˜ç‰©:**
- [ ] LayoutSwitcherç»„ä»¶
- [ ] ColumnContentç»„ä»¶
- [ ] LayoutRendereræœåŠ¡
- [ ] ç»„ä»¶æ ·å¼ç³»ç»Ÿ
- [ ] äº¤äº’æµç¨‹å®ç°

**éªŒæ”¶æ ‡å‡†:**
- [ ] æ‰€æœ‰ç»„ä»¶å¯æ­£å¸¸æ¸²æŸ“
- [ ] åŸºç¡€äº¤äº’åŠŸèƒ½å®Œæ•´
- [ ] å“åº”å¼è®¾è®¡æ­£ç¡®
- [ ] æ— æ˜æ˜¾UIç¼ºé™·

### é‡Œç¨‹ç¢‘ 3: é«˜çº§åŠŸèƒ½å®Œæˆ (Day 18)
**äº¤ä»˜ç‰©:**
- [ ] åŠ¨ç”»ç³»ç»Ÿ
- [ ] å“åº”å¼ç®¡ç†å™¨
- [ ] åˆ—å®½è°ƒæ•´åŠŸèƒ½
- [ ] æ€§èƒ½ä¼˜åŒ–å®ç°
- [ ] ç§»åŠ¨ç«¯é€‚é…

**éªŒæ”¶æ ‡å‡†:**
- [ ] åŠ¨ç”»æµç•…æ— å¡é¡¿
- [ ] å“åº”å¼åˆ‡æ¢æ­£ç¡®
- [ ] åˆ—å®½è°ƒæ•´åŠŸèƒ½å®Œæ•´
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡

### é‡Œç¨‹ç¢‘ 4: ç³»ç»Ÿé›†æˆå®Œæˆ (Day 27)
**äº¤ä»˜ç‰©:**
- [ ] BlockSuiteå®Œæ•´é›†æˆ
- [ ] æ‰©å±•ç³»ç»Ÿå®ç°
- [ ] æ’ä»¶ç¤ºä¾‹
- [ ] å®Œæ•´åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·æ–‡æ¡£

**éªŒæ”¶æ ‡å‡†:**
- [ ] åœ¨çœŸå®ç¯å¢ƒä¸­æ­£å¸¸å·¥ä½œ
- [ ] ä¸ç°æœ‰åŠŸèƒ½æ— å†²çª
- [ ] æ‰©å±•æ¥å£å¯ç”¨
- [ ] æ–‡æ¡£å®Œæ•´å‡†ç¡®

### æœ€ç»ˆäº¤ä»˜ (Day 33)
**äº¤ä»˜ç‰©:**
- [ ] ç”Ÿäº§å°±ç»ªçš„ä»£ç 
- [ ] å®Œæ•´çš„æµ‹è¯•å¥—ä»¶
- [ ] è¯¦ç»†çš„æ–‡æ¡£ä½“ç³»
- [ ] éƒ¨ç½²å’Œç»´æŠ¤æŒ‡å—
- [ ] ç”¨æˆ·åŸ¹è®­ææ–™

**éªŒæ”¶æ ‡å‡†:**
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 90%
- [ ] æ€§èƒ½æŒ‡æ ‡å…¨éƒ¨è¾¾æ ‡
- [ ] å…¼å®¹æ€§æµ‹è¯•é€šè¿‡
- [ ] ç”¨æˆ·ä½“éªŒæµ‹è¯•é€šè¿‡

## ğŸš€ å‘å¸ƒç­–ç•¥

### ç‰ˆæœ¬è§„åˆ’
```
v1.0.0-alpha.1 (Day 5)  - åŸºç¡€æ¶æ„ç‰ˆæœ¬
v1.0.0-alpha.2 (Day 12) - UIç»„ä»¶ç‰ˆæœ¬
v1.0.0-beta.1  (Day 18) - åŠŸèƒ½å®Œæ•´ç‰ˆæœ¬
v1.0.0-rc.1    (Day 27) - å€™é€‰å‘å¸ƒç‰ˆæœ¬
v1.0.0         (Day 33) - æ­£å¼å‘å¸ƒç‰ˆæœ¬
```

### å‘å¸ƒæ£€æŸ¥æ¸…å•
- [ ] ä»£ç å®¡æŸ¥é€šè¿‡
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½åŸºå‡†è¾¾æ ‡
- [ ] å®‰å…¨æ‰«æé€šè¿‡
- [ ] æ–‡æ¡£å®Œæ•´å‡†ç¡®
- [ ] ç‰ˆæœ¬å·å’Œå˜æ›´æ—¥å¿—æ›´æ–°
- [ ] æ„å»ºäº§ç‰©éªŒè¯
- [ ] å‘åå…¼å®¹æ€§æ£€æŸ¥

### éƒ¨ç½²æµç¨‹
1. **é¢„å‘å¸ƒéªŒè¯**
   - åœ¨æµ‹è¯•ç¯å¢ƒå®Œæ•´éªŒè¯
   - æ€§èƒ½å’Œå…¼å®¹æ€§æµ‹è¯•
   - ç”¨æˆ·éªŒæ”¶æµ‹è¯•

2. **ç”Ÿäº§ç¯å¢ƒå‘å¸ƒ**
   - ç°åº¦å‘å¸ƒ (10% ç”¨æˆ·)
   - ç›‘æ§å…³é”®æŒ‡æ ‡
   - é€æ­¥æ‰©å¤§è¦†ç›–èŒƒå›´

3. **å‘å¸ƒåç›‘æ§**
   - é”™è¯¯ç‡ç›‘æ§
   - æ€§èƒ½æŒ‡æ ‡ç›‘æ§
   - ç”¨æˆ·åé¦ˆæ”¶é›†

## ğŸ“ˆ é¡¹ç›®é£é™©ä¸ç¼“è§£æªæ–½

### æŠ€æœ¯é£é™©
| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| BlockSuite APIå˜æ›´ | é«˜ | ä¸­ | åŠæ—¶è·Ÿè¿›ä¸Šæ¸¸å˜åŒ–ï¼Œå»ºç«‹é€‚é…å±‚ |
| æ€§èƒ½ä¸è¾¾æ ‡ | ä¸­ | ä¸­ | æ—©æœŸæ€§èƒ½æµ‹è¯•ï¼Œä¼˜åŒ–æ–¹æ¡ˆé¢„ç ” |
| æµè§ˆå™¨å…¼å®¹æ€§ | ä¸­ | ä½ | å……åˆ†çš„å…¼å®¹æ€§æµ‹è¯•ï¼ŒPolyfillå‡†å¤‡ |

### æ—¶é—´é£é™©
| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| éœ€æ±‚å˜æ›´ | é«˜ | ä¸­ | æ¨¡å—åŒ–è®¾è®¡ï¼Œæ•æ·å¼€å‘æ–¹æ³• |
| æŠ€æœ¯éš¾ç‚¹ | ä¸­ | ä¸­ | æŠ€æœ¯é¢„ç ”ï¼Œå¤‡é€‰æ–¹æ¡ˆå‡†å¤‡ |
| èµ„æºä¸è¶³ | é«˜ | ä½ | å…³é”®è·¯å¾„ä¼˜åŒ–ï¼Œå¤–éƒ¨æ”¯æŒ |

### è´¨é‡é£é™©
| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| Bugæ•°é‡è¿‡å¤š | ä¸­ | ä¸­ | ä¸¥æ ¼çš„ä»£ç å®¡æŸ¥ï¼Œå……åˆ†æµ‹è¯• |
| ç”¨æˆ·ä½“éªŒé—®é¢˜ | é«˜ | ä½ | ç”¨æˆ·æµ‹è¯•ï¼Œè®¾è®¡è¯„å®¡ |
| æ–‡æ¡£ä¸å®Œæ•´ | ä½ | ä¸­ | æ–‡æ¡£ä¸å¼€å‘å¹¶è¡Œï¼Œå®¡æŸ¥æœºåˆ¶ |

## ğŸ“ å›¢é˜Ÿåä½œ

### è§’è‰²åˆ†å·¥
- **æŠ€æœ¯è´Ÿè´£äºº**: æ¶æ„è®¾è®¡ï¼Œå…³é”®æŠ€æœ¯å†³ç­–
- **å‰ç«¯å¼€å‘**: UIç»„ä»¶å®ç°ï¼Œç”¨æˆ·äº¤äº’
- **æµ‹è¯•å·¥ç¨‹å¸ˆ**: æµ‹è¯•ç”¨ä¾‹ç¼–å†™ï¼Œè´¨é‡ä¿è¯
- **äº§å“ç»ç†**: éœ€æ±‚ç®¡ç†ï¼Œç”¨æˆ·éªŒæ”¶
- **è®¾è®¡å¸ˆ**: è§†è§‰è®¾è®¡ï¼Œäº¤äº’è®¾è®¡

### æ²Ÿé€šæœºåˆ¶
- **æ—¥ä¼š**: æ¯æ—¥è¿›å±•åŒæ­¥ï¼Œé—®é¢˜è®¨è®º
- **å‘¨ä¼š**: é‡Œç¨‹ç¢‘è¿›å±•ï¼Œé£é™©è¯„ä¼°
- **è¯„å®¡ä¼š**: è®¾è®¡è¯„å®¡ï¼Œä»£ç è¯„å®¡
- **æ¼”ç¤ºä¼š**: åŠŸèƒ½æ¼”ç¤ºï¼Œç”¨æˆ·åé¦ˆ

### åä½œå·¥å…·
- **ä»£ç ç®¡ç†**: Git + GitHub
- **é¡¹ç›®ç®¡ç†**: é¡¹ç›®çœ‹æ¿ï¼Œä»»åŠ¡è·Ÿè¸ª
- **æ–‡æ¡£åä½œ**: åœ¨çº¿æ–‡æ¡£ï¼Œç‰ˆæœ¬æ§åˆ¶
- **æ²Ÿé€šå·¥å…·**: å³æ—¶æ¶ˆæ¯ï¼Œè§†é¢‘ä¼šè®®

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**åˆ›å»ºæ—¥æœŸ**: 2025-07-27  
**é¡¹ç›®å‘¨æœŸ**: 33å¤©  
**é¢„æœŸäº¤ä»˜**: 2025-08-29  