# 收藏操作与展示（功能 + 实现说明）

> 关联上级：`工作空间/页面组织与导航/收藏与最近访问.md`  
> 相关代码位置：
> - 收藏按钮：`FavoriteButton`（`@yunke/core/blocksuite/block-suite-header/favorite`）
> - 页面列表收藏视图：`packages/frontend/core/src/components/page-list/components/*`（如 `favorite-tag` 等）

---

## 1. 收藏操作

### 1.1 功能说明

- 用户可以将常用页面标记为“收藏”：
  - 在页面详情头部点击“收藏”按钮；
  - 在页面列表/树的操作菜单中选择“收藏/取消收藏”（视实现）。
- 收藏状态是页面级的布尔属性：
  - 收藏：将页面加入收藏列表；
  - 取消收藏：从收藏列表移除。

### 1.2 顶部收藏按钮（FavoriteButton）

- 在普通页面头部 `NormalPageHeader` 中：

```tsx
<div className={styles.iconButtonContainer}>
  {hideCollect ? null : (
    <>
      <FavoriteButton pageId={page?.id} />
      <InfoButton docId={page.id} />
    </>
  )}
  {/* 其他操作按钮 */}
</div>
```

- 行为：
  - `FavoriteButton` 根据 `pageId` 读取当前收藏状态；
  - 点击时切换收藏状态；
  - UI 上通常显示为星标图标（填充/空心）。

### 1.3 列表中的收藏入口（概念）

- 在页面列表中，通常也提供收藏入口：
  - 在每行操作列中；
  - 或在右键菜单/更多菜单中；
  - 操作逻辑与头部的 `FavoriteButton` 一致，只是入口不同。

---

## 2. 收藏展示区域

### 2.1 侧边栏收藏区域

- 功能：
  - 在工作空间左侧导航栏中，独立展示已收藏页面列表；
  - 用户可以快速从侧边栏进入常用页面。
- 展示内容：
  - 页面图标与标题；
  - 可选：最近访问时间或其他小标签；
  - 列表长度可能有限制（只展示最近收藏的若干个）。

### 2.2 列表中的收藏标记

- 在全局页列表或集合视图中：
  - 对已收藏的页面添加收藏标识（如星号、特殊颜色）；
  - 可通过筛选项“只看收藏”快速切换视图。

### 2.3 排序策略

- 典型排序方式：
  - 按用户自定义顺序（拖拽排序，视实现）；
  - 按收藏时间倒序（最近收藏的在上方）；
  - 按最近访问时间排序。
- 实际排序逻辑通常由后端或列表服务控制，前端根据返回的顺序渲染。

---

## 3. 与其他模块的关系

- 收藏对页面列表行为的影响：
  - 可作为筛选条件，“只看收藏”；
  - 也可参与综合排序（收藏优先显示）。
- 与“页面统计信息”的关系：
  - 收藏频率可以作为页面重要性的参考；
  - 列表中可以将“收藏 + 最近访问”结合使用，构建“常用页面”视图。

> 总体上，收藏功能通过简单的布尔属性和若干列表视图组合，为用户提供了一种“个人常用入口”的组织方式，配合页面树和全局视图形成互补。 
