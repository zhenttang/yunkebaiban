# 文本类块详述（功能 + 实现说明）

> 关联上级：`工作空间/页面与内容编辑/块类型与编辑能力.md`  
> 主要代码位置（块定义）：
> - `blocksuite/yunke/blocks/paragraph/*`
> - `blocksuite/yunke/blocks/list/*`
> - `blocksuite/yunke/blocks/callout/*`
> - `blocksuite/yunke/blocks/note/*` 等  
> 编辑器集成：
> - `packages/frontend/core/src/blocksuite/editors/page-editor.ts`
> - `packages/frontend/core/src/blocksuite/view-extensions/editor-view/*`

---

## 1. 支持的文本块与使用场景

### 1.1 标题块（Heading）

- 类型：标题 1 / 标题 2 / 标题 3（以及其他级别，视配置）；
- 功能：
  - 表示页面结构层级；
  - 对大纲/导航（如侧边大纲视图）有直接影响；
  - 有助于 AI 总结和结构化处理。
- 使用场景：
  - 章节标题、二级小节、三级小点；
  - 与折叠功能或大纲导航相结合。

### 1.2 段落块（Paragraph）

- 类型：普通文本段落；
- 功能：
  - 支持多种文本格式（见下文）；
  - 是最常用的通用文本容器。
- 使用场景：
  - 记录笔记、文档正文、会议记录内容等。

### 1.3 列表块（List）

- 类型：
  - 有序列表（编号）；
  - 无序列表（圆点/其他符号）。
- 功能：
  - 支持多层级缩进；
  - 支持在不同层级之间提升/降级条目；
  - 可与快捷键结合（如 `-` 空格，`1.` 空格等）。
- 使用场景：
  - 列出任务清单、要点、步骤；
  - 嵌套列表用于描述结构化信息。

### 1.4 引用与 Callout

- 引用块（Quote）：
  - 用于强调引用的文字或重要内容；
  - 视觉上一般有边框或特殊样式。
- Callout 块：
  - 含有图标和背景色的强调块；
  - 可用不同颜色表示不同类型提示（提示/警告/信息等）。

### 1.5 其他文本型块（示例）

- Note/Note-like 块：
  - 用于做简短说明或注释；
- 标注/分隔文本与其他块之间的过渡区域。

---

## 2. 文本格式能力（行内样式）

> 文本格式由编辑器内的行内 Mark 机制提供，底层由 BlockSuite 负责。这里从功能角度列出前端支持的格式。

### 2.1 基础格式

- 加粗（Bold）；
- 斜体（Italic）；
- 下划线（Underline）；
- 删除线（Strikethrough，视配置）。

触发方式：

- 工具栏按钮；
- Markdown 快捷语法（如 `**text**`、`*text*` 等，视配置）；
- 键盘快捷键（如 `Ctrl+B`、`Ctrl+I` 等）。

### 2.2 语义格式

- 代码（Inline Code）：
  - 用于展示短代码片段或关键字；
- 高亮（Highlight）：
  - 用于强调重要文本；
- 链接（Link）：
  - 为选中文本添加超链接；
  - 支持点击跳转或预览。

### 2.3 段落级格式

- 对齐方式：
  - 左对齐、居中、右对齐（视实现）；
- 列表缩进：
  - 增加/减少列表层级；
- 段前/段后间距等版式（多数通过主题样式统一控制）。

---

## 3. 文本块在编辑器中的集成方式（概览）

### 3.1 BlockSuite 定义层

- 每种文本类块在 `blocksuite/yunke/blocks/*` 下有相应实现：
  - Title/Heading：定义文本属性（内容、级别）、渲染组件；
  - Paragraph/List/Callout 等：定义自身的 schema、渲染逻辑。
- 这些块会注册到 BlockSuite 编辑器中，成为可插入/编辑的块类型。

### 3.2 前端编辑器集成

- `page-editor.ts` / `edgeless-editor.ts` 中配置了：
  - 可用块类型；
  - 常用快捷插入方式；
  - 与工具栏/菜单的集成。
- `editor-view` 扩展中：
  - 注入了一些辅助服务（如 `display-meta`、`doc-mode-service` 等），以支持：
    - 按块结构生成大纲；
    - 记录文档统计信息；
    - 与搜索/引用等能力联动。

---

## 4. 与其他功能的关系

- 与“页面类型判定”：
  - 文档页面中大量使用文本类块；
  - 某些特殊页面（如仅含白板块）则更多依赖其它类型块。
- 与“AI 功能”：
  - AI 的重写、总结、生成能力通常作用于文本块；
  - 选中文本后调用 AI，会基于文本块内容生成新文本。
- 与“页面属性与统计”：
  - 文本块内容会参与字数统计、阅读时长估计等；
  - 标题块用于构建文档大纲和导航。 
