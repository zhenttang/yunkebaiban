# 基础信息编辑界面（功能 + 实现说明）

> 关联上级：`工作空间/设置与成员管理/基础设置.md`  
> 相关代码位置（部分）：
> - 工作空间设置对话框：`packages/frontend/core/src/desktop/dialogs/setting/workspace-setting/*`
> - 通用设置对话框框架：`packages/frontend/core/src/desktop/dialogs/setting/*`
> - 工作空间信息服务：`packages/frontend/core/src/modules/workspace/*`

> 说明：下面从“功能”和“架构”两个层面描述，部分具体实现需要结合 workspace-setting 子模块代码，这里不展开所有细节。

---

## 1. 界面内容与布局

### 1.1 基本信息区域

- 工作空间名称：
  - 文本输入框；
  - 用于在导航、工作空间切换器等位置显示；
  - 通常为必填项。
- 图标：
  - 图标选择器组件（可选 Emoji 或系统图标）；
  - 在左侧导航、工作空间列表、workspace selector 中使用。
- 封面：
  - 封面图片选择/上传控件；
  - 用于工作空间级别的视觉展示（视产品设计）。

### 1.2 描述信息与可选字段

- 描述信息：
  - 多行文本输入，用于说明该工作空间的用途；
  - 在某些视图中作为辅助信息展示。
- 其他可选字段（根据产品需求）：
  - 行业/类型（例如“医疗”、“教育”等）；
  - 默认语言/时区；
  - 可见性（私有/团队/公开）。

---

## 2. 工作空间信息的读写流程

### 2.1 数据来源：WorkspaceService

- 工作空间相关信息通常由 `WorkspaceService` 与相关实体管理：
  - 当前工作空间元信息（`WorkspaceMetadata`）包括 `id`、`flavour`、`initialized` 等；
  - 扩展字段（名称、描述、图标等）通过服务器接口加载。
- 在设置界面打开时：
  - 从 `WorkspaceService` 读取当前工作空间信息，填充表单初始值；
  - 如信息未加载完成，显示加载状态。

### 2.2 提交与更新

- 用户修改表单内容后点击“保存”：
  - 前端对必填项和格式进行校验（如名称不能为空）；
  - 通过 workspace 相关 API 提交更新请求；
  - 成功后：
    - 更新本地缓存（WorkspaceService）；
    - 关闭设置对话框或提示“保存成功”；
  - 失败时：
    - 显示错误消息（通过通知组件，使用 i18n 文案）。

---

## 3. 校验与错误处理

### 3.1 必填项校验

- 名称：
  - 必填，长度限制（例如 1–64 字符）；
  - 可以在输入框下方显示错误消息。
- 图标/封面：
  - 非必填，但需要校验文件类型和大小（上传时校验）。

### 3.2 服务器端错误

- 网络错误或后端返回错误码时：
  - 保留用户已输入的数据；
  - 显示统一错误提示（例如“保存失败，请稍后重试”）；
  - 日志中记录详细错误信息用于诊断。

---

## 4. 与其他设置项的关系

- 工作空间基本信息会影响：
  - 工作空间选择器（显示名称/图标）；
  - 左侧导航顶部的工作空间信息区；
  - 管理后台和统计页面中对工作空间的识别。
- 在设置界面中，基础信息通常与其他 tab 共存：
  - 如“外观”、“备份”、“实验特性”等；
  - 通用设置框架负责路由和 tab 切换，基础信息只是其中一个模块。 
