# 标签详情与过滤行为（功能 + 实现说明）

> 关联上级：`工作空间/全局视图与列表/标签视图.md`  
> 相关代码位置：
> - 标签列表与导航：`packages/frontend/core/src/components/page-list/tags/*`
> - 标签渲染：`TagListItemRenderer`（`page-group.tsx`）
> - 标签过滤视图：`desktop/pages/workspace/tag`（按标签的页面列表）

---

## 1. 标签详情视图

### 1.1 访问标签详情的路径

- 在工作空间中，标签详情页通常使用以下路由：

```txt
/workspace/:workspaceId/tag/:tagId
```

- 来自位置：
  - 全部标签列表（All Tags）点击某标签；
  - 侧边栏标签导航点击某标签；
  - 页面中标签点击（跳转至标签视图）。

### 1.2 标签详情内容

在标签详情页中，需要展示：

- 标签基本信息：
  - 名称；
  - 颜色；
  - 描述（如存在）。
- 统计信息（可选）：
  - 绑定页面数量；
  - 最近活跃时间（最近一次修改带该标签的页面）。

这些信息可以来自 `TagMeta` 或后端返回的标签详情接口。

---

## 2. 标签下页面列表与过滤行为

### 2.1 基础过滤：按标签展示页面

- 核心行为：
  - 在标签详情页中，默认展示所有“带有该标签”的页面列表；
  - 列表使用全局页面列表组件（基于 `page-list`），只是在数据源上加上“标签 = 当前 tagId”的过滤条件。

### 2.2 进一步过滤：时间、集合等

- 在标签视图中，可以继续应用追加过滤条件：
  - 时间：只看最近 7 天更新的页面；
  - 集合：只看某个集合下带该标签的页面；
  - 创建者/编辑者：只看某人编辑的页面。

实现思路：

- 利用 `Filter` 组件（`components/filter/*`）构建“标签 + 其他条件”的复合过滤器；
- 将标签本身作为一个固定条件（不可删除），其他条件由用户添加/移除。

### 2.3 多标签组合过滤（可选）

- 在更复杂的标签视图中，可以支持多标签组合：
  - “包含标签 A 且包含标签 B”；
  - “包含标签 A 或标签 B”（需要指定逻辑关系）。

实现建议：

- 在 Filter 条件中允许选择多个标签，并明确指定逻辑（AND/OR）；
- 在 UI 中清楚展示当前筛选条件，以避免用户混淆。

---

## 3. 与标签列表视图的配合

### 3.1 从标签列表到标签详情

- 标签列表视图（All Tags）展示所有标签及其关联页面数；
- 点击某标签：
  - 跳转到 `tag/:tagId` 对应的标签详情页；
  - 同时在标签详情页顶部展示该标签的详细信息。

### 3.2 返回/切换行为

- 在标签详情页中提供返回/切换入口：
  - “返回全部标签”；
  - 在标签详情页中直接切换到相邻标签（例如通过下拉列表或侧边导航）。

> 标签详情与过滤行为的目标是：让用户在“某个标签”这一语义范围内，对页面进行深度浏览与二次筛选，从而在大量内容中快速找到与某个主题/话题相关的页面。 
