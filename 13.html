<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ååŒæ¬è¿åŠ è½½åŠ¨ç”»</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #F9FAFB;
            /* ç™½æ¿ç‚¹é˜µèƒŒæ™¯ */
            background-image: radial-gradient(#D1D5DB 1.5px, transparent 1.5px);
            background-size: 24px 24px;
            font-family: 'Inter', sans-serif;
            user-select: none;
        }

        .loader-stage {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* è¿›åº¦æ¡å®¹å™¨ */
        .progress-container {
            position: relative;
            width: 300px;
            height: 24px;
            background-color: #E5E7EB;
            border-radius: 12px;
            overflow: visible;
            /* å…è®¸å…‰æ ‡è¶…å‡º */
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
            transform: scale(0);
            /* åˆå§‹éšè— */
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #3B82F6, #60A5FA);
            border-radius: 12px;
            position: relative;
            transition: width 0.1s linear;
        }

        /* å…‰æ ‡ç»„ä»¶ */
        .cursor {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 50;
            pointer-events: none;
            transition: transform 0.5s cubic-bezier(0.25, 1, 0.5, 1);
            /* å¹³æ»‘ç§»åŠ¨ */
            will-change: transform;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .cursor svg {
            filter: drop-shadow(1px 2px 3px rgba(0, 0, 0, 0.2));
        }

        .cursor-label {
            margin-left: 16px;
            margin-top: 4px;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            color: white;
            white-space: nowrap;
            opacity: 0;
            transform: translateY(-5px);
            transition: opacity 0.3s, transform 0.3s;
        }

        .cursor.active .cursor-label {
            opacity: 1;
            transform: translateY(0);
        }

        /* é¢œè‰²å˜ä½“ */
        .cursor-red .fill-color {
            fill: #EF4444;
        }

        .cursor-red .cursor-label {
            background-color: #EF4444;
        }

        .cursor-blue .fill-color {
            fill: #3B82F6;
        }

        .cursor-blue .cursor-label {
            background-color: #3B82F6;
        }

        .cursor-green .fill-color {
            fill: #10B981;
        }

        .cursor-green .cursor-label {
            background-color: #10B981;
        }

        /* è£…é¥°å…ƒç´ ï¼šæ˜Ÿæ˜Ÿ/HighFiveè¡¨æƒ… */
        .decoration {
            position: absolute;
            font-size: 24px;
            animation: popUp 0.6s forwards;
            pointer-events: none;
        }

        @keyframes popUp {
            0% {
                transform: scale(0) translateY(0);
                opacity: 1;
            }

            50% {
                transform: scale(1.2) translateY(-10px);
            }

            100% {
                transform: scale(1) translateY(-20px);
                opacity: 0;
            }
        }

        .high-five-shockwave {
            position: absolute;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid #F59E0B;
            opacity: 0;
        }

        .shockwave-anim {
            animation: shockwave 0.5s ease-out forwards;
        }

        @keyframes shockwave {
            0% {
                transform: scale(0.5);
                opacity: 1;
                border-width: 4px;
            }

            100% {
                transform: scale(3);
                opacity: 0;
                border-width: 0px;
            }
        }

        /* åŠ è½½æ–‡å­— */
        .loading-text {
            position: absolute;
            top: 50px;
            /* ç›¸å¯¹äºè¿›åº¦æ¡ä¸‹æ–¹ */
            width: 100%;
            text-align: center;
            color: #6B7280;
            font-size: 0.9rem;
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>

<body>

    <div class="loader-stage" id="stage">

        <!-- è¿›åº¦æ¡ -->
        <div class="progress-container" id="progressContainer">
            <div class="progress-bar" id="progressBar"></div>
            <div class="loading-text" id="loadingText">æ­£åœ¨ååŒåŠ è½½èµ„æº...</div>
        </div>

        <!-- High Five å†²å‡»æ³¢ç‰¹æ•ˆå®¹å™¨ -->
        <div id="shockwave" class="high-five-shockwave"></div>

        <!-- å…‰æ ‡ A (Red - Puller) -->
        <div class="cursor cursor-red" id="cursorA">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path class="fill-color" d="M3 3L10.07 19.97L12.58 12.58L19.97 10.07L3 3Z" stroke="white"
                    stroke-width="2" />
            </svg>
            <div class="cursor-label">Alex</div>
        </div>

        <!-- å…‰æ ‡ B (Blue - Pusher) -->
        <div class="cursor cursor-blue" id="cursorB">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path class="fill-color" d="M3 3L10.07 19.97L12.58 12.58L19.97 10.07L3 3Z" stroke="white"
                    stroke-width="2" />
            </svg>
            <div class="cursor-label">Sam</div>
        </div>

        <!-- å…‰æ ‡ C (Green - Artist/Cheerleader) -->
        <div class="cursor cursor-green" id="cursorC">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path class="fill-color" d="M3 3L10.07 19.97L12.58 12.58L19.97 10.07L3 3Z" stroke="white"
                    stroke-width="2" />
            </svg>
            <div class="cursor-label">Taylor</div>
        </div>

    </div>

    <script>
        const cursors = {
            A: document.getElementById('cursorA'),
            B: document.getElementById('cursorB'),
            C: document.getElementById('cursorC')
        };
        const stage = document.getElementById('stage');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const loadingText = document.getElementById('loadingText');
        const shockwave = document.getElementById('shockwave');

        // è·å–å±å¹•ä¸­å¿ƒåæ ‡
        const getCenter = () => ({ x: window.innerWidth / 2, y: window.innerHeight / 2 });

        // ç§»åŠ¨å…‰æ ‡çš„è¾…åŠ©å‡½æ•°
        function moveCursor(cursor, x, y, duration = 500) {
            cursor.style.transition = `transform ${duration}ms cubic-bezier(0.25, 1, 0.5, 1)`;
            cursor.style.transform = `translate(${x}px, ${y}px)`;
            // ç¨å¾®å€¾æ–œä¸€ç‚¹å¢åŠ åŠ¨æ€æ„Ÿ
            cursor.querySelector('svg').style.transform = `rotate(-15deg)`;
        }

        // ç¬ç§»ï¼ˆæ— åŠ¨ç”»ï¼‰
        function teleportCursor(cursor, x, y) {
            cursor.style.transition = 'none';
            cursor.style.transform = `translate(${x}px, ${y}px)`;
            // å¼ºåˆ¶é‡ç»˜
            cursor.offsetHeight;
        }

        // ç”Ÿæˆè£…é¥°å…ƒç´  (æ˜Ÿæ˜Ÿ)
        function spawnStar(x, y) {
            const star = document.createElement('div');
            star.classList.add('decoration');
            star.textContent = 'âœ¨';
            star.style.left = x + 'px';
            star.style.top = y + 'px';
            document.body.appendChild(star);
            setTimeout(() => star.remove(), 600);
        }

        // ç”Ÿæˆ High Five è¡¨æƒ…
        function spawnHighFive(x, y) {
            const el = document.createElement('div');
            el.classList.add('decoration');
            el.textContent = 'ğŸ™Œ';
            el.style.fontSize = '40px';
            el.style.left = (x - 20) + 'px';
            el.style.top = (y - 40) + 'px';
            el.style.zIndex = 100;
            document.body.appendChild(el);
            setTimeout(() => el.remove(), 800);
        }

        function wait(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // åŠ¨ç”»ä¸»é€»è¾‘
        async function startCollabLoader() {
            const center = getCenter();
            const barWidth = 300;
            const barHalf = barWidth / 2;

            // 1. åˆå§‹åŒ–ä½ç½®ï¼šå±å¹•å¤–
            teleportCursor(cursors.A, center.x - 400, center.y + 200);
            teleportCursor(cursors.B, center.x - 500, center.y - 100);
            teleportCursor(cursors.C, center.x + 400, center.y + 300);

            progressBar.style.width = '0%';
            progressContainer.style.transform = 'scale(0)';
            loadingText.style.opacity = 0;

            await wait(100);

            // 2. è¿›åœº & æ˜¾ç¤ºè¿›åº¦æ¡
            progressContainer.style.transform = 'scale(1)';
            loadingText.style.opacity = 1;

            // æ¿€æ´»åå­—æ ‡ç­¾
            Object.values(cursors).forEach(c => c.classList.add('active'));

            // å…‰æ ‡å°±ä½
            // A (Red) å»è¿›åº¦æ¡æœ€å³ä¾§ (æ‹‰)
            moveCursor(cursors.A, center.x - barHalf + 10, center.y + 10, 800);
            // B (Blue) å»è¿›åº¦æ¡æœ€å·¦ä¾§ (æ¨) - åˆå§‹ä½ç½®åœ¨0
            moveCursor(cursors.B, center.x - barHalf - 10, center.y + 10, 800);
            // C (Green) åœ¨ä¸Šæ–¹å‡†å¤‡ç”»ç”»
            moveCursor(cursors.C, center.x, center.y - 50, 800);

            await wait(800);

            // 3. åŠ è½½è¿‡ç¨‹ (Moving the Bar)
            // æˆ‘ä»¬æ¨¡æ‹Ÿä» 0% åˆ° 100% çš„è¿‡ç¨‹ï¼Œå…‰æ ‡è·Ÿéšç§»åŠ¨
            const duration = 2000; // åŠ è½½è€—æ—¶ 2ç§’
            const frames = 60;
            const interval = duration / frames;

            // ç»¿è‰²å…‰æ ‡çš„åŠ¨ç”»å‚æ•° (ç”»åœ†åœˆ)
            let angle = 0;

            for (let i = 0; i <= frames; i++) {
                const progress = i / frames; // 0 to 1
                const currentWidth = progress * barWidth;

                // æ›´æ–°è¿›åº¦æ¡
                progressBar.style.width = `${progress * 100}%`;

                // A (Red) ä¸€ç›´åœ¨è¿›åº¦æ¡çš„æœ€å‰ç«¯ (Leading edge)
                // èµ·å§‹ X: center.x - barHalf
                const currentX_A = (center.x - barHalf) + currentWidth;
                // ä½¿ç”¨ style ç›´æ¥èµ‹å€¼ä»¥é¿å… transition å»¶è¿Ÿé€ æˆçš„æ»å
                cursors.A.style.transition = 'transform 50ms linear';
                cursors.A.style.transform = `translate(${currentX_A}px, ${center.y + 12}px)`;

                // B (Blue) ç¨å¾®æ»åä¸€ç‚¹æˆ–è€…åœ¨åé¢æ¨
                // æˆ–è€…æ˜¯ä»å·¦è¾¹æ¨ç€èµ°ï¼Œè¿™é‡Œç®€å•ç‚¹ï¼Œè®©Båœ¨åé¢è·Ÿç€æ£€æŸ¥
                const currentX_B = (center.x - barHalf) + (currentWidth * 0.3); // èµ°å¾—æ…¢ç‚¹
                cursors.B.style.transition = 'transform 50ms linear';
                cursors.B.style.transform = `translate(${currentX_B}px, ${center.y + 15}px)`;

                // C (Green) ç–¯ç‹‚ç”»æ˜Ÿæ˜Ÿ (åœ¨è¿›åº¦æ¡ä¸Šæ–¹ç›˜æ—‹)
                angle += 0.3;
                const r = 40;
                const cX = center.x - barHalf + currentWidth + 20; // ç¨å¾®è¶…å‰ä¸€ç‚¹
                const cY = center.y - 40;
                const starX = cX + Math.cos(angle) * r;
                const starY = cY + Math.sin(angle) * 20; // æ¤­åœ†

                cursors.C.style.transition = 'transform 50ms linear';
                cursors.C.style.transform = `translate(${starX}px, ${starY}px)`;

                if (i % 5 === 0) spawnStar(starX, starY); // æ¯å‡ å¸§æ’’ä¸ªæ˜Ÿæ˜Ÿ

                await wait(interval);
            }

            // 4. å®Œæˆ & åº†ç¥ (High Five)
            loadingText.innerText = "åŠ è½½å®Œæˆï¼";

            // è¿›åº¦æ¡æ¶ˆå¤±
            progressContainer.style.transform = 'scale(1.1)'; // å¼¹ä¸€ä¸‹
            progressContainer.style.opacity = '0';
            loadingText.style.transform = 'translateY(20px)';
            loadingText.style.opacity = '0';

            await wait(200);

            // æ±‡èšåˆ°ä¸­å¿ƒ
            moveCursor(cursors.A, center.x - 20, center.y, 400);
            moveCursor(cursors.B, center.x + 20, center.y, 400);
            moveCursor(cursors.C, center.x, center.y - 20, 400);

            await wait(400);

            // ç¢°æ’ç‰¹æ•ˆ
            spawnHighFive(center.x, center.y);
            shockwave.style.left = (center.x - 20) + 'px';
            shockwave.style.top = (center.y - 20) + 'px';
            shockwave.classList.add('shockwave-anim');

            // ç¨å¾®åé€€ä¸€ä¸‹æ¨¡æ‹Ÿæ’å‡»åå¼¹
            moveCursor(cursors.A, center.x - 50, center.y + 20, 200);
            moveCursor(cursors.B, center.x + 50, center.y + 20, 200);
            moveCursor(cursors.C, center.x, center.y - 60, 200);

            await wait(800);

            // 5. æ•£å¼€ç¦»åœº
            Object.values(cursors).forEach(c => c.classList.remove('active')); // éšè—åå­—

            moveCursor(cursors.A, center.x - 800, center.y, 600);
            moveCursor(cursors.B, center.x + 800, center.y, 600);
            moveCursor(cursors.C, center.x, center.y - 600, 600);

            await wait(1000);

            // å¾ªç¯
            shockwave.classList.remove('shockwave-anim');
            progressContainer.style.opacity = '1';
            loadingText.innerText = "æ­£åœ¨ååŒåŠ è½½èµ„æº...";
            loadingText.style.transform = 'translateY(0)';

            startCollabLoader();
        }

        // å¯åŠ¨
        // ç›‘å¬ resize ç¡®ä¿åæ ‡æ­£ç¡®
        window.addEventListener('resize', () => { }); // ç®€å•å ä½ï¼Œå®é™…åº”ç”¨ä¸­å¯èƒ½éœ€è¦é‡æ–°è®¡ç®—åæ ‡

        window.onload = startCollabLoader;

    </script>
</body>

</html>