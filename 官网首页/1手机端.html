<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- 关键：禁止用户缩放，适配移动端触摸 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Limitless | The OS for Thinking</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;700&family=JetBrains+Mono:wght@400&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <style>
        :root {
            --bg-color: #F3F4F6;
            --text-main: #111827;
            --text-sub: #6B7280;
            --accent: #2563EB;
        }

        body {
            margin: 0;
            overflow-x: hidden;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            transition: background-color 0.8s ease;
            /* 移动端平滑滚动 */
            -webkit-overflow-scrolling: touch; 
        }

        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 1;
        }

        /* --- HUD & UI --- */
        .hud-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 10;
            pointer-events: none;
            padding: 30px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .nav-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }

        .brand {
            font-weight: 700; font-size: 20px; letter-spacing: -0.5px;
            display: flex; align-items: center; gap: 10px;
            /* 增加文字阴影防止背景干扰 */
            text-shadow: 0 2px 10px rgba(255,255,255,0.5);
        }
        .brand::before { content: ''; width: 12px; height: 12px; background: var(--accent); border-radius: 2px; }

        .menu-items {
            display: flex; gap: 30px; font-size: 14px; font-weight: 500; color: var(--text-sub);
        }

        /* 底部工具栏 */
        .toolbar-mockup {
            position: absolute;
            left: 50%; bottom: 40px;
            transform: translateX(-50%);
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            padding: 12px 24px;
            border-radius: 100px;
            display: flex;
            gap: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.5);
            transition: all 0.3s ease;
        }
        .tool-icon {
            width: 24px; height: 24px; border-radius: 4px; background: #E5E7EB; transition: 0.3s;
        }
        .tool-icon.active { background: var(--text-main); }

        /* --- Text Story --- */
        .story-layer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            z-index: 5;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            justify-content: center;
            /* 默认 padding */
            padding: 0 10%; 
        }

        .feature-card {
            position: absolute;
            opacity: 0;
            transform: translateY(40px);
            max-width: 500px;
            width: 100%;
        }

        .tag {
            display: inline-block;
            background: rgba(37, 99, 235, 0.1);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            padding: 6px 12px;
            border-radius: 100px;
            margin-bottom: 16px;
            text-transform: uppercase;
            backdrop-filter: blur(5px);
        }

        .headline {
            font-size: 3.5rem;
            font-weight: 800;
            line-height: 1.05;
            margin-bottom: 20px;
            letter-spacing: -1px;
        }

        .subtext {
            font-size: 1.125rem;
            line-height: 1.6;
            color: var(--text-sub);
        }

        .scroll-spacer { height: 1400vh; } /* 保持原有滚动长度 */
        
        /* Dark Mode styles */
        body.dark-mode { --bg-color: #0B0C0E; --text-main: #F9FAFB; --text-sub: #9CA3AF; }
        body.dark-mode .toolbar-mockup { background: rgba(30,30,30,0.8); border-color: rgba(255,255,255,0.1); }
        body.dark-mode .tool-icon { background: #333; }
        body.dark-mode .tool-icon.active { background: #fff; }

        /* --- Mobile Responsiveness --- */
        @media (max-width: 768px) {
            /* 导航栏简化 */
            .menu-items span:not(:last-child) { display: none; } /* 只保留 Download/Sign In */
            .hud-layer { padding: 20px; }

            /* 工具栏缩小并下沉 */
            .toolbar-mockup {
                bottom: 30px;
                padding: 10px 20px;
                gap: 16px;
                transform: translateX(-50%) scale(0.9); 
            }

            /* 文字层全屏居中 */
            .story-layer {
                padding: 0 24px;
                align-items: center;
                text-align: center;
            }

            .feature-card {
                /* 强制所有卡片居中，覆盖原本的 align-self */
                align-self: center !important; 
                text-align: center !important;
                /* 增加文字背景阴影，防止与3D物体混淆 */
                text-shadow: 0 10px 20px var(--bg-color); 
            }
            
            /* 调整字体大小 */
            .headline { font-size: 2.5rem; margin-bottom: 12px; }
            .subtext { font-size: 1rem; }
            
            /* 针对特定卡片的位置微调 */
            #card-2 { top: 15%; } /* Pen 场景文字上移，留出下方给笔 */
            #card-3 { top: 15%; } /* Eraser 场景同理 */
        }
    </style>
</head>
<body>

    <div class="hud-layer">
        <div class="nav-header">
            <div class="brand">LIMITLESS</div>
            <div class="menu-items">
                <span>Product</span>
                <span>Solutions</span>
                <span>Pricing</span>
                <span style="color:var(--text-main); border-bottom: 1px solid currentColor;">Get App</span>
            </div>
        </div>
        
        <div class="toolbar-mockup">
            <div class="tool-icon active" id="icon-pen"></div>
            <div class="tool-icon" id="icon-eraser"></div>
            <div class="tool-icon" id="icon-ruler"></div>
            <div class="tool-icon" id="icon-tag"></div>
            <div class="tool-icon" style="border-radius: 100px; width: 40px; background: var(--accent);"></div>
        </div>
    </div>

    <div id="canvas-container"></div>

    <div class="story-layer">
        
        <!-- Intro -->
        <div class="feature-card" id="card-1">
            <div class="headline">Reinventing<br>The Canvas.</div>
            <div class="subtext">
                Traditional whiteboards are static. <br>
                We built a <b>living workspace</b> where every tool is an intelligent engine.
            </div>
        </div>

        <!-- Tool 1: Pen -->
        <div class="feature-card" id="card-2" style="align-self: flex-end; text-align: right;">
            <div class="tag">Flow Engine™ 2.0</div>
            <div class="headline">Zero Latency.<br>Fluid Thought.</div>
            <div class="subtext">
                Not just a pixel brush. Our <b>Zero-G Pen</b> uses physics simulation to stabilize your handwriting.
            </div>
        </div>

        <!-- Tool 2: Eraser -->
        <div class="feature-card" id="card-3">
            <div class="tag">Semantic Erase</div>
            <div class="headline">Personalized<br>Tools.</div>
            <div class="subtext">
                Even the humblest eraser has a soul. Watch as we laser-etch your identity onto the digital sleeve.
            </div>
        </div>

        <!-- Tool 3: Ruler -->
        <div class="feature-card" id="card-4" style="align-self: center; text-align: center;">
            <div class="tag">Intelligent Alignment</div>
            <div class="headline">Order from Chaos.</div>
            <div class="subtext">
                The <b>Bridge System</b> acts as an invisible grid that snaps your ideas into perfect perspective.
            </div>
        </div>

        <!-- Tool 4: Tag -->
        <div class="feature-card dark-mode" id="card-5" style="max-width: 600px;">
            <div class="tag" style="background:rgba(255,255,255,0.2); color:#fff;">Knowledge Graph</div>
            <div class="headline">Turn Sketches<br>Into Data.</div>
            <div class="subtext" style="color: #9CA3AF;">
                With <b>Braille-Tags</b>, every note has memory. Visualize deadlines and priority directly on the canvas.
            </div>
        </div>
        
        <!-- Finale -->
        <div class="feature-card dark-mode" id="card-6" style="align-self: center; text-align: center;">
            <div class="headline" style="font-size: clamp(3rem, 5vw, 4rem);">Limitless.</div>
            <div class="subtext" style="color: #9CA3AF;">The complete toolkit for modern thinkers.</div>
            <div style="margin-top: 30px; padding: 15px 30px; background: #fff; color:#000; display:inline-block; border-radius: 100px; font-weight:600; cursor: pointer;">
                Start Free Trial ->
            </div>
        </div>

    </div>

    <div class="scroll-spacer"></div>

    <script>
        const CONFIG = {
            bgLight: 0xF3F4F6,
            accent: 0x2563EB,
        };

        // --- Scene Setup ---
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(CONFIG.bgLight);
        scene.fog = new THREE.FogExp2(CONFIG.bgLight, 0.015);

        const camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 1000);
        
        // 【关键】初始相机位置逻辑：根据屏幕比例决定相机远近
        function updateCameraPos() {
            const isMobile = window.innerWidth < 768;
            // 移动端拉远相机(Z=45)，确保物体能完全显示
            // 电脑端保持原距离(Z=35)
            camera.position.set(0, 15, isMobile ? 45 : 35); 
            camera.lookAt(0, 0, 0);
        }
        updateCameraPos();

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        // 【关键】限制像素比，优化移动端性能
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2)); 
        renderer.shadowMap.enabled = true;
        renderer.shadowMap.type = THREE.PCFSoftShadowMap;
        container.appendChild(renderer.domElement);

        // --- Lighting ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
        scene.add(ambientLight);
        const mainLight = new THREE.DirectionalLight(0xffffff, 1);
        mainLight.position.set(10, 20, 10);
        mainLight.castShadow = true;
        mainLight.shadow.mapSize.width = 1024; // 降低阴影分辨率优化性能
        mainLight.shadow.mapSize.height = 1024;
        scene.add(mainLight);
        const blueLight = new THREE.PointLight(CONFIG.accent, 0.5);
        blueLight.position.set(-10, 5, -10);
        scene.add(blueLight);

        // --- Objects (Keeping Original Assets) ---
        
        // Grid
        const gridTex = new THREE.CanvasTexture((function(){
            const c = document.createElement('canvas'); c.width=64; c.height=64;
            const x = c.getContext('2d'); x.fillStyle='transparent'; x.fillRect(0,0,64,64);
            x.fillStyle='#CBD5E1'; x.beginPath(); x.arc(32,32,2,0,Math.PI*2); x.fill();
            return c;
        })());
        gridTex.wrapS = gridTex.wrapT = THREE.RepeatWrapping; gridTex.repeat.set(100, 100);
        const grid = new THREE.Mesh(new THREE.PlaneGeometry(400, 400), new THREE.MeshBasicMaterial({ map: gridTex, transparent: true, opacity: 0.5 }));
        grid.rotation.x = -Math.PI/2; scene.add(grid);

        // Curve Lines
        const curvePath = new THREE.CatmullRomCurve3([
            new THREE.Vector3(-3, 0.05, -2), new THREE.Vector3(-1.5, 0.05, -0.5),
            new THREE.Vector3(0, 0.05, -2), new THREE.Vector3(2, 0.05, 0), new THREE.Vector3(4, 0.05, -1)
        ]);
        const drawnCurve = new THREE.Line(
            new THREE.BufferGeometry().setFromPoints(curvePath.getPoints(100)),
            new THREE.LineBasicMaterial({ color: CONFIG.accent, linewidth: 3 })
        );
        drawnCurve.geometry.setDrawRange(0, 0); scene.add(drawnCurve);
        
        const linePath = new THREE.LineCurve3(new THREE.Vector3(-4, 0.05, 1), new THREE.Vector3(4, 0.05, 1));
        const straightLine = new THREE.Line(
            new THREE.BufferGeometry().setFromPoints(linePath.getPoints(50)),
            new THREE.LineBasicMaterial({ color: CONFIG.accent, linewidth: 3 })
        );
        straightLine.geometry.setDrawRange(0, 0); scene.add(straightLine);

        // --- Tools Construction (Simplified for brevity, same logic) ---
        
        // Pen
        function createPen() {
            const g = new THREE.Group();
            const matBody = new THREE.MeshStandardMaterial({ color: 0x202020, roughness: 0.5 });
            const matMetal = new THREE.MeshStandardMaterial({ color: 0xcccccc, roughness: 0.3, metalness: 0.8 });
            
            g.add(new THREE.Mesh(new THREE.CylinderGeometry(0.015, 0.005, 0.05, 8), new THREE.MeshStandardMaterial({color:0x111}))); // Tip
            const cone = new THREE.Mesh(new THREE.CylinderGeometry(0.08, 0.015, 0.25, 16), matMetal); cone.position.y=0.175; g.add(cone);
            const body = new THREE.Mesh(new THREE.CylinderGeometry(0.2, 0.2, 4.5, 6), matBody); body.position.y=2.74+2.25; body.castShadow=true; g.add(body);
            const ring = new THREE.Mesh(new THREE.CylinderGeometry(0.21, 0.21, 0.04, 32), new THREE.MeshBasicMaterial({color: CONFIG.accent})); ring.position.y=2.72; g.add(ring);
            
            g.rotation.order = 'YXZ';
            return g;
        }
        const pen = createPen(); scene.add(pen);

        // Eraser
        let eraserCtx, eraserTex;
        function createEraser() {
            const g = new THREE.Group();
            const rubber = new THREE.Mesh(new THREE.BoxGeometry(4, 0.8, 1.8), new THREE.MeshStandardMaterial({color:0xFFFFFF, roughness:0.9}));
            rubber.castShadow=true; g.add(rubber);
            
            const c = document.createElement('canvas'); c.width=512; c.height=256;
            eraserCtx = c.getContext('2d');
            eraserTex = new THREE.CanvasTexture(c);
            const sleeve = new THREE.Mesh(new THREE.BoxGeometry(2.6, 0.9, 1.9), new THREE.MeshStandardMaterial({map:eraserTex, roughness:0.8}));
            sleeve.position.x=0.5; sleeve.castShadow=true; g.add(sleeve);
            return g;
        }
        const eraser = createEraser(); scene.add(eraser);

        // Ruler
        const rulerGroup = new THREE.Group();
        rulerGroup.add(new THREE.Mesh(new THREE.BoxGeometry(8, 0.1, 2), new THREE.MeshPhysicalMaterial({color: 0xE0F2FE, transmission:0.9, thickness:1.5})));
        for(let i=-3.5; i<=3.5; i+=0.5) {
            const t = new THREE.Mesh(new THREE.BoxGeometry(0.05, 0.15, 0.8), new THREE.MeshBasicMaterial({color:CONFIG.accent}));
            t.position.set(i,0,0); rulerGroup.add(t);
        }
        const ruler = rulerGroup; scene.add(ruler);

        // Tag
        const tagGroup = new THREE.Group();
        const tShape = new THREE.Shape(); tShape.moveTo(0,0); tShape.lineTo(3,0); tShape.lineTo(3.5,0.5); tShape.lineTo(3,1); tShape.lineTo(0,1);
        const tMesh = new THREE.Mesh(new THREE.ExtrudeGeometry(tShape,{depth:0.1, bevelEnabled:false}), new THREE.MeshBasicMaterial({color:CONFIG.accent, transparent:true, opacity:0.8}));
        tMesh.position.set(-1.75,-0.5,0); tagGroup.add(tMesh);
        const tag = tagGroup; scene.add(tag);

        // --- Animation Timeline ---
        gsap.registerPlugin(ScrollTrigger);
        
        // Init Positions
        pen.position.set(0, 30, 0); pen.rotation.set(Math.PI/2, 0, 0);
        eraser.position.set(0, 30, 0); ruler.position.set(0, 30, 0); tag.position.set(0, 30, 0);

        function updateEraserText(p) {
            if(!eraserCtx) return;
            eraserCtx.fillStyle='#f4f4f4'; eraserCtx.fillRect(0,0,512,256);
            eraserCtx.fillStyle='#e0e0e0'; eraserCtx.strokeRect(0,0,512,256);
            
            eraserCtx.save();
            eraserCtx.beginPath(); eraserCtx.rect(0,0, p*512, 256); eraserCtx.clip();
            eraserCtx.translate(256,128); eraserCtx.font='100px "Ma Shan Zheng"'; 
            eraserCtx.textAlign='center'; eraserCtx.textBaseline='middle'; eraserCtx.fillStyle='#333';
            eraserCtx.fillText("云科", 0, 0);
            eraserCtx.restore();
            eraserTex.needsUpdate = true;
        }
        updateEraserText(0);

        const icons = document.querySelectorAll('.tool-icon');
        function activateIcon(idx) {
            icons.forEach((icon, i) => icon.classList.toggle('active', i===idx));
        }

        const tl = gsap.timeline({
            scrollTrigger: {
                trigger: ".scroll-spacer", start: "top top", end: "bottom bottom", scrub: 1
            }
        });

        // 1. Intro
        tl.to("#card-1", { opacity: 1, y: 0, duration: 2 }).to("#card-1", { opacity: 0, y: -50, duration: 2 }, "+=1");

        // 2. Pen
        let penState = { p: 0 };
        tl.call(() => activateIcon(0))
          .to(pen.position, { x: -3, y: 2, z: -1, duration: 2 })
          .to(pen.rotation, { x: Math.PI/3.5, y: Math.PI, z: -Math.PI/6, duration: 2 }, "<")
          .to("#card-2", { opacity: 1, y: 0, duration: 2 }, "-=1")
          .to(pen.position, { y: 0, duration: 0.5 })
          .to(penState, { p: 1, duration: 4, ease: "none", onUpdate: () => {
              const pt = curvePath.getPoint(penState.p);
              pen.position.set(pt.x, pt.y+0.02, pt.z);
              const t = curvePath.getTangent(penState.p);
              pen.rotation.set(Math.PI/3.5, Math.atan2(t.x, t.z)+Math.PI, -Math.PI/6);
              drawnCurve.geometry.setDrawRange(0, Math.floor(penState.p*100));
          }})
          .to(pen.position, { y: 30, duration: 2 }).to("#card-2", { opacity: 0, y: -50, duration: 2 }, "<");

        // 3. Eraser
        let writeState = { p: 0 };
        tl.call(() => activateIcon(1))
          .to(eraser.position, { x: 0, y: 1.5, z: 0, duration: 2 })
          .to(eraser.rotation, { x: Math.PI/4, y: 0, z: 0, duration: 2 }, "<")
          .to("#card-3", { opacity: 1, y: 0, duration: 2 })
          .to(pen.position, { x: -1.5, y: 2.5, z: 0.8, duration: 1.5 })
          .to(pen.rotation, { x: Math.PI/3.5, y: Math.PI/2, z: -Math.PI/6, duration: 1 }, "<")
          .to(writeState, { p: 1, duration: 4, ease: "none", onUpdate: () => {
              updateEraserText(writeState.p);
              pen.position.set(-1.0 + (writeState.p*2.5) + 0.5, 2.2, Math.sin(writeState.p*30)*0.2 + 0.5);
              pen.rotation.set(Math.PI/3.5 + Math.sin(writeState.p*40)*0.1, Math.PI/2, -Math.PI/6);
          }})
          .to(pen.position, { y: 30, duration: 1 })
          .to(eraser.rotation, { z: Math.PI/3, duration: 0.5 })
          .to(eraser.position, { x: -1, y: 1.8, z: -0.5, duration: 0.5 }, "<")
          .to(eraser.position, { x: 1, y: 1.85, z: 0.5, duration: 0.2, yoyo: true, repeat: 5 })
          .to(drawnCurve.material, { opacity: 0, duration: 1 }, "<")
          .to(eraser.position, { y: 30, duration: 2 }).to("#card-3", { opacity: 0, y: -50, duration: 2 }, "<");

        // 4. Ruler
        tl.call(() => activateIcon(2))
          .to(ruler.position, { x: 0, y: 0.2, z: 0, duration: 2 })
          .to("#card-4", { opacity: 1, y: 0, duration: 2 })
          .to(grid.material, { opacity: 0.6, duration: 2 }, "<")
          .set(pen.position, { x: -4.5, y: 2, z: 1.5 }).set(pen.rotation, { x: Math.PI/3.5, y: Math.PI/2, z: -Math.PI/6 })
          .to(pen.position, { y: 0.05, duration: 1 })
          .to(pen.position, { x: 4.5, duration: 3, ease: "power1.inOut", onUpdate: function(){ straightLine.geometry.setDrawRange(0, Math.floor(this.progress()*50)); }})
          .to([ruler.position, pen.position], { y: 30, duration: 2 }).to("#card-4", { opacity: 0, y: -50, duration: 2 }, "<");

        // 5. Finale
        tl.call(() => activateIcon(3))
          .to("body", { backgroundColor: "#0B0C0E" }, "<").to("body", { className: "dark-mode" }, "<")
          .to([scene.fog.color, scene.background], { r:0.04, g:0.04, b:0.05, duration: 2 }, "<")
          .to(grid.material, { opacity: 0.05, duration: 2 }, "<")
          .to(tag.position, { x: 0, y: 2, z: 0, duration: 2 }, "-=1")
          .to("#card-5", { opacity: 1, y: 0, duration: 2 })
          .to(tag.rotation, { y: Math.PI * 2, duration: 8, ease: "none" }, "<")
          .to("#card-5", { opacity: 0, y: -50, duration: 1 }, "+=2")
          .to("#card-6", { opacity: 1, y: 0, duration: 1 })
          .call(() => activateIcon(-1));

        // --- Loop ---
        const clock = new THREE.Clock();
        function animate() {
            requestAnimationFrame(animate);
            const t = clock.getElapsedTime();
            if(pen.position.y < 5 && pen.position.y > 0.1) pen.position.y += Math.sin(t*3)*0.0005;
            if(eraser.position.y < 20) eraser.position.y += Math.cos(t*2.5)*0.001;
            if(tag.position.y < 20) tag.position.y += Math.sin(t*3)*0.001;
            if(ruler.position.y < 20) ruler.position.y += Math.cos(t*1.5)*0.001;
            renderer.render(scene, camera);
        }
        animate();

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
            updateCameraPos(); // 响应式调整相机位置
        });

    </script>
</body>
</html>