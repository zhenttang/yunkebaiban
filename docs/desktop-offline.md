# 桌面端离线模式（Windows）

## 适用场景

- 无后端环境，希望桌面端本地保存数据并可离线使用
- 需要把本地数据文件放到自定义目录

## 如何开启

1. 打开「设置」→「离线」
2. 开启「离线模式」
3. 在「离线数据目录」选择保存位置（不选则使用默认目录）
4. 点击「立即重启」使配置生效

## 创建本地数据

离线模式下的数据以本地工作区保存（落盘为 `storage.db` SQLite 文件）：

- 在「离线」面板点击「创建本地工作区」
- 或在工作区创建时选择「本地」

## 说明

- 修改离线模式或目录后需要重启应用
- 默认目录为应用数据目录下的 `offline` 子目录
- 当前离线实现不依赖 Go/Rust 服务，直接写入本地 SQLite
- 如果检测到旧的 JSON `storage.db`，首次启动会自动迁移为 SQLite（旧文件会保留备份）
- 依赖 `better-sqlite3`（安装依赖时自动编译）；若模块加载失败会回退为 JSON 存储
